{"version":3,"sources":["../src/chains.ts","../src/helpers/accountsAreEqual.ts","../src/helpers/contractCall.ts","../src/helpers/getAbiMessage.ts","../src/helpers/decodeOutput.ts","../src/helpers/getBalance.ts","../src/helpers/formatBalance.ts","../src/helpers/getGasLimit.ts","../src/helpers/deployContract.ts","../src/helpers/initPolkadotJs.ts","../src/helpers/transferBalance.ts","../src/helpers/unwrapResult.ts","../src/registry.ts","../src/wallets.ts","../src/provider.tsx","../src/hooks/useBalance.ts","../src/hooks/useContract.ts","../src/hooks/useRegisteredContract.ts"],"names":["SubstrateExplorer","development","alephzeroTestnet","rococo","shibuya","shiden","alephzero","astar","allSubstrateChains","getSubstrateChain","networkId","chain","accountsAreEqual","a1","a2","accountArraysAreEqual","a","i","BN","bnToBn","stringCamelCase","getAbiMessage","contract","method","abiMessage","m","isErr","o","isOk","getReturnTypeName","type","decodeOutput","result","_a","_b","_c","_d","output","decodedOutput","isError","returnType","returnTypeName","registry","r","errorText","okText","errorKey","errorValue","polkadotFormatBalance","formatBalance","api","value","options","tokenDecimals","tokenSymbol","_options","formattedBalance","__spreadProps","__spreadValues","siUnit","toFixed","decimals","removeTrailingZeros","_value","valueDecimals","getBalance","address","formatterOptions","__async","parseBalanceData","watchBalance","callback","data","balanceData","freeBalance","reservedBalance","balance","miscFrozenBalance","feeFrozenBalance","reducibleBalance","freeBalanceFormatted","reservedBalanceFormatted","reducibleBalanceFormatted","balanceFormatted","getGasLimit","_refTime","_proofSize","refTime","proofSize","getMaxGasLimit","reductionFactor","blockWeights","maxExtrinsic","maxRefTime","maxProofSize","contractCallDryRun","_0","_1","_2","_3","_4","account","args","gasLimit","storageDepositLimit","contractQuery","queryFn","contractTx","statusCb","accountAddress","hasZeroBalance","hasBalanceBelowPassedValue","dryResult","resolve","reject","isDevelopment","finalStatus","asFinalStatus","unsub","extrinsicHash","extrinsicIndex","blockHash","errorEvent","event","successEvent","e","errorMessage","CodePromise","deployContract","abi","wasm","constructorMethod","code","constructorFn","events","status","extrinsicFailedEvent","hash","block","blockNumber","ApiPromise","HttpProvider","WsProvider","initPolkadotJs","rpcUrl","provider","transferBalance","fromAccount","toAddress","amount","isInBlock","transferFullBalance","keepAlive","unwrapResultOrError","outcome","unwrapResultOrDefault","defaultValue","unwrappedResult","ContractPromise","registerDeployment","setDeployments","deployment","deployments","idx","contractId","registerDeployments","getDeployment","getDeploymentContract","SubstrateWalletPlatform","polkadotjs","subwallet","talisman","nova","alephzeroSigner","nightly","allSubstrateWallets","getSubstrateWallet","id","wallet","isWalletInstalled","injectedWindow","injectedExtension","novaIsInstalled","enableWallet","appName","injectedWindowProvider","injected","createContext","useContext","useEffect","useState","jsx","UseInkathonErrorCode","UseInkathonProviderContext","useInkathon","context","UseInkathonProvider","children","defaultChain","connectOnInit","_deployments","apiOptions","isInitializing","setIsInitializing","isInitialized","setIsInitialized","isConnecting","setIsConnecting","isConnected","setIsConnected","error","setError","activeChain","setActiveChain","setApi","setProvider","accounts","setAccounts","activeAccount","setActiveAccount","activeExtension","setActiveExtension","lastActiveAccount","setLastActiveAccount","activeSigner","setActiveSigner","unsubscribeAccounts","setUnsubscribeAccounts","initialize","_chain","message","updateAccounts","injectedAccounts","lastActiveAccountAddress","newAccounts","_lastAccount","newAccount","connect","wallets","w","_wallet","extension","signer","unsubscribe","disconnect","disconnectApi","handler","switchActiveChain","activeWallet","useBalance","watch","setBalanceData","unsubscribes","setUnsubscribes","updateBalanceData","prev","useContract","setContract","useRegisteredContract"],"mappings":"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","sourcesContent":["/**\n * Substrate Chain Type\n */\nexport interface SubstrateChain {\n  network: string\n  name: string\n  rpcUrls: [string, ...string[]]\n  ss58Prefix?: number\n  explorerUrls?: Partial<Record<SubstrateExplorer, string>>\n  testnet?: boolean\n  faucetUrls?: string[]\n}\n\nexport enum SubstrateExplorer {\n  Subscan = 'subscan',\n  PolkadotJs = 'polkadotjs',\n}\n\n/**\n * Defined Substrate Chain Constants\n */\n\n/// Local Development Network\nexport const development: SubstrateChain = {\n  network: 'development',\n  name: 'Local Development',\n  ss58Prefix: 42,\n  rpcUrls: ['ws://127.0.0.1:9944'],\n  explorerUrls: {\n    [SubstrateExplorer.PolkadotJs]: `https://polkadot.js.org/apps/?rpc=${encodeURIComponent(\n      'ws://127.0.0.1:9944',\n    )}/#/explorer`,\n  },\n  testnet: true,\n  faucetUrls: ['https://polkadot.js.org/apps/#/accounts?rpc=ws://127.0.0.1:9944'],\n}\n\n/// Testnets\n\nexport const alephzeroTestnet: SubstrateChain = {\n  network: 'alephzero-testnet',\n  name: 'Aleph Zero Testnet',\n  ss58Prefix: 42,\n  rpcUrls: ['wss://ws.test.azero.dev'],\n  explorerUrls: {\n    [SubstrateExplorer.PolkadotJs]: `https://test.azero.dev/?rpc=${encodeURIComponent(\n      'wss://ws.test.azero.dev',\n    )}/#/explorer`,\n  },\n  testnet: true,\n  faucetUrls: ['https://faucet.test.azero.dev'],\n}\n\nexport const rococo: SubstrateChain = {\n  network: 'rococo',\n  name: 'Rococo',\n  rpcUrls: ['wss://rococo-rpc.polkadot.io'],\n  explorerUrls: {\n    [SubstrateExplorer.Subscan]: `https://rococo.subscan.io`,\n  },\n  testnet: true,\n  faucetUrls: ['https://matrix.to/#/#rococo-faucet:matrix.org'],\n}\n\nexport const shibuya: SubstrateChain = {\n  network: 'shibuya',\n  name: 'Shibuya Testnet',\n  ss58Prefix: 5,\n  rpcUrls: ['wss://shibuya-rpc.dwellir.com'],\n  explorerUrls: {\n    [SubstrateExplorer.Subscan]: `https://shibuya.subscan.io`,\n  },\n  testnet: true,\n  faucetUrls: ['https://portal.astar.network/#/shibuya-testnet/assets'],\n}\n\n/// Canary Networks (Kusama)\n\nexport const shiden: SubstrateChain = {\n  network: 'shiden',\n  name: 'Shiden',\n  ss58Prefix: 5,\n  rpcUrls: ['wss://shiden-rpc.dwellir.com'],\n  explorerUrls: {\n    [SubstrateExplorer.Subscan]: `https://shiden.subscan.io`,\n  },\n}\n\n/// Mainnets\n\nexport const alephzero: SubstrateChain = {\n  network: 'alephzero',\n  name: 'Aleph Zero',\n  ss58Prefix: 42,\n  rpcUrls: ['wss://ws.azero.dev'],\n  explorerUrls: {\n    [SubstrateExplorer.Subscan]: `https://alephzero.subscan.io`,\n    [SubstrateExplorer.PolkadotJs]: `https://azero.dev/?rpc=${encodeURIComponent(\n      'wss://ws.azero.dev',\n    )}/#/explorer`,\n  },\n}\n\nexport const astar: SubstrateChain = {\n  network: 'astar',\n  name: 'Astar',\n  ss58Prefix: 5,\n  rpcUrls: ['wss://astar-rpc.dwellir.com'],\n  explorerUrls: {\n    [SubstrateExplorer.Subscan]: `https://astar.subscan.io`,\n  },\n  faucetUrls: [],\n}\n\n/**\n * Exporting all chains separately\n */\nexport const allSubstrateChains: SubstrateChain[] = [\n  development,\n  alephzeroTestnet,\n  rococo,\n  shibuya,\n  shiden,\n  alephzero,\n  astar,\n]\n\n/**\n * Returns chain (if existent) for given identifier (`network` field).\n */\nexport const getSubstrateChain = (networkId?: string): SubstrateChain | undefined => {\n  return allSubstrateChains.find(\n    (chain) => chain.network.toLowerCase() === (networkId || '').toLowerCase(),\n  )\n}\n","import { InjectedAccount } from '@polkadot/extension-inject/types'\n\n/**\n * Returns true if both given injected accounts have the same address.\n */\nexport const accountsAreEqual = (a1?: InjectedAccount, a2?: InjectedAccount) => {\n  return (a1?.address || '').toLowerCase() === (a2?.address || '').toLowerCase()\n}\n\n/**\n * Returns true if both given arrays of injected accounts contain the\n * same objects with the same addresses in the same order.\n */\nexport const accountArraysAreEqual = (a1: InjectedAccount[], a2: InjectedAccount[]) => {\n  if (a1.length !== a2.length) return false\n  return a1.every((a, i) => accountsAreEqual(a, a2[i]))\n}\n","import { ApiPromise } from '@polkadot/api'\nimport { ContractPromise } from '@polkadot/api-contract'\nimport { ContractCallOutcome, ContractOptions } from '@polkadot/api-contract/types'\nimport { EventRecord } from '@polkadot/types/interfaces'\nimport { Callback, IKeyringPair, ISubmittableResult } from '@polkadot/types/types'\nimport { BN, bnToBn, stringCamelCase } from '@polkadot/util'\nimport { decodeOutput } from './decodeOutput'\nimport { getAbiMessage } from './getAbiMessage'\nimport { getBalance } from './getBalance'\nimport { getMaxGasLimit } from './getGasLimit'\n\n/**\n * Performs a dry run for the given contract method and arguments.\n * Is used within `contractQuery` & `contractTx` for gas estimation.\n */\nexport const contractCallDryRun = async (\n  api: ApiPromise,\n  account: IKeyringPair | string,\n  contract: ContractPromise,\n  method: string,\n  options = {} as ContractOptions,\n  args = [] as unknown[],\n): Promise<ContractCallOutcome> => {\n  const abiMessage = getAbiMessage(contract, method)\n  const address = (account as IKeyringPair)?.address || account\n  const { value, gasLimit, storageDepositLimit } = options\n  const result = await api.call.contractsApi.call<ContractCallOutcome>(\n    address,\n    contract.address,\n    value ?? new BN(0),\n    gasLimit ?? null,\n    storageDepositLimit ?? null,\n    abiMessage.toU8a(args),\n  )\n\n  return result\n}\n\n/**\n * Calls a given non-mutating contract method (query) with maximum possible gas limit.\n */\nexport const contractQuery = async (\n  api: ApiPromise,\n  address: string,\n  contract: ContractPromise,\n  method: string,\n  options = {} as ContractOptions,\n  args = [] as unknown[],\n): Promise<ContractCallOutcome> => {\n  // HACK: This should be possible by setting the `gasLimit` to null or -1 in the future.\n  const gasLimit = getMaxGasLimit(api)\n\n  // Call actual query/tx\n  const queryFn = contract.query[stringCamelCase(method)]\n  return await queryFn(address, { ...options, gasLimit }, ...args)\n}\n\n/**\n * Calls a given mutating contract method (tx) and wraps it in a promise.\n * Before, a dry run is performed to determine the required gas & potential errors.\n */\nexport type ContractTxResult = {\n  dryResult: ContractCallOutcome\n  result?: ISubmittableResult\n  errorMessage?: string | 'UserCancelled' | 'ExtrinsicFailed' | 'TokenBelowMinimum' | 'Error'\n  errorEvent?: EventRecord\n  successEvent?: EventRecord\n  extrinsicHash?: string\n  extrinsicIndex?: number\n  blockHash?: string\n}\nexport const contractTx = async (\n  api: ApiPromise,\n  account: IKeyringPair | string,\n  contract: ContractPromise,\n  method: string,\n  options = {} as ContractOptions,\n  args = [] as unknown[],\n  statusCb?: Callback<ISubmittableResult>,\n): Promise<ContractTxResult> => {\n  // Check if account has sufficient balance\n  const accountAddress = typeof account === 'string' ? account : account.address\n  const { reducibleBalance } = await getBalance(api, accountAddress)\n  const hasZeroBalance = !reducibleBalance || reducibleBalance.isZero()\n  const hasBalanceBelowPassedValue =\n    options?.value && reducibleBalance && reducibleBalance.lte(bnToBn(options.value))\n  if (hasZeroBalance || hasBalanceBelowPassedValue) {\n    return Promise.reject({\n      errorMessage: 'TokenBelowMinimum',\n    })\n  }\n\n  // Dry run to determine required gas and potential errors\n  delete options.gasLimit\n  const dryResult = await contractCallDryRun(api, account, contract, method, options, args)\n  const { isError, decodedOutput } = decodeOutput(dryResult, contract, method)\n  if (isError)\n    return Promise.reject({\n      dryResult,\n      errorMessage: decodedOutput || 'Error',\n    })\n\n  // Call actual query/tx & wrap it in a promise\n  const gasLimit = dryResult.gasRequired\n  return new Promise(async (resolve, reject) => {\n    try {\n      const isDevelopment =\n        (api.runtimeChain || '').toLowerCase() === 'development' ? 'isInBlock' : 'isFinalized'\n      const finalStatus = isDevelopment ? 'isInBlock' : 'isFinalized'\n      const asFinalStatus = isDevelopment ? 'asInBlock' : 'asFinalized'\n\n      const tx = contract.tx[stringCamelCase(method)]({ ...options, gasLimit }, ...args)\n\n      const unsub = await tx.signAndSend(account, async (result) => {\n        statusCb?.(result)\n\n        const isFinalized = result?.status?.[finalStatus]\n        if (!isFinalized) return\n\n        // Determine extrinsic and block info\n        const extrinsicHash = result.txHash.toHex()\n        const extrinsicIndex = result.txIndex\n        const blockHash = result.status[asFinalStatus].toHex()\n\n        const errorEvent = result?.events.find(({ event }) =>\n          api.events.system.ExtrinsicFailed.is(event),\n        )\n        if (errorEvent) {\n          // Reject if `ExtrinsicFailed` event was found\n          reject({\n            dryResult,\n            errorMessage: decodeOutput || 'ExtrinsicFailed',\n            errorEvent,\n            extrinsicHash,\n            extrinsicIndex,\n            blockHash,\n          })\n          unsub?.()\n        } else {\n          // Resolve succesfully otherwise\n          const successEvent = result?.events.find(({ event }) =>\n            api.events.system.ExtrinsicSuccess.is(event),\n          )\n\n          resolve({\n            dryResult,\n            result,\n            successEvent,\n            extrinsicHash,\n            extrinsicIndex,\n            blockHash,\n          })\n          unsub?.()\n        }\n      })\n    } catch (e: any) {\n      let errorMessage = 'Error'\n\n      if (e?.message?.match(/user reject request/i)) {\n        errorMessage = 'UserCancelled'\n      }\n\n      const errorText = e?.toString?.()\n      const rpcErrorCode =\n        errorText && typeof errorText === 'string'\n          ? errorText.match(/RpcError: (\\d+):/i)?.[1]\n          : null\n      switch (rpcErrorCode) {\n        case '1010':\n          errorMessage = 'TokenBelowMinimum'\n          break\n        default:\n          break\n      }\n\n      reject({ errorMessage })\n    }\n  })\n}\n","import { ContractPromise } from '@polkadot/api-contract'\nimport { stringCamelCase } from '@polkadot/util'\n\n/**\n * Returns the ABI message for the given method name within the given contract.\n */\nexport const getAbiMessage = (contract: ContractPromise, method: string) => {\n  const abiMessage = contract.abi.messages.find(\n    (m) => stringCamelCase(m.method) === stringCamelCase(method),\n  )\n  if (!abiMessage) {\n    throw new Error(`\"${method}\" not found in Contract`)\n  }\n  return abiMessage\n}\n","import { ContractPromise } from '@polkadot/api-contract'\nimport { ContractExecResult } from '@polkadot/types/interfaces'\nimport { AnyJson, TypeDef } from '@polkadot/types/types'\nimport { getAbiMessage } from './getAbiMessage'\n\n/**\n * Helper types & functions\n * SOURCE: https://github.com/paritytech/contracts-ui (GPL-3.0-only)\n */\ntype ContractResultErr = {\n  Err: AnyJson\n}\n\ninterface ContractResultOk {\n  Ok: AnyJson\n}\n\nfunction isErr(o: ContractResultErr | ContractResultOk | AnyJson): o is ContractResultErr {\n  return typeof o === 'object' && o !== null && 'Err' in o\n}\n\nfunction isOk(o: ContractResultErr | ContractResultOk | AnyJson): o is ContractResultOk {\n  return typeof o === 'object' && o !== null && 'Ok' in o\n}\n\nfunction getReturnTypeName(type: TypeDef | null | undefined) {\n  return type?.lookupName || type?.type || ''\n}\n\n/**\n * Decodes & unwraps outputs and errors of a given result, contract, and method.\n * Parsed error message can be found in `decodedOutput` if `isError` is true.\n * SOURCE: https://github.com/paritytech/contracts-ui (GPL-3.0-only)\n */\nexport function decodeOutput(\n  { result }: Pick<ContractExecResult, 'result' | 'debugMessage'>,\n  contract: ContractPromise,\n  method: string,\n): {\n  output: any\n  decodedOutput: string\n  isError: boolean\n} {\n  let output\n  let decodedOutput = ''\n  let isError = true\n\n  if (result.isOk) {\n    const flags = result.asOk.flags.toHuman()\n    isError = flags.includes('Revert')\n    const abiMessage = getAbiMessage(contract, method)\n    const returnType = abiMessage.returnType\n    const returnTypeName = getReturnTypeName(returnType)\n    const registry = contract.abi.registry\n    const r = returnType\n      ? registry.createTypeUnsafe(returnTypeName, [result.asOk.data]).toHuman()\n      : '()'\n    output = isOk(r) ? r.Ok : isErr(r) ? r.Err : r\n\n    const errorText = isErr(output)\n      ? typeof output.Err === 'object'\n        ? JSON.stringify(output.Err, null, 2)\n        : output.Err?.toString() ?? 'Error'\n      : output !== 'Ok'\n      ? output?.toString() || 'Error'\n      : 'Error'\n\n    const okText = isOk(r)\n      ? typeof output === 'object'\n        ? JSON.stringify(output, null, '\\t')\n        : output?.toString() ?? '()'\n      : JSON.stringify(output, null, '\\t') ?? '()'\n\n    decodedOutput = isError ? errorText : okText\n  } else if (result.isErr) {\n    output = result.toHuman()\n\n    let errorText\n    if (\n      isErr(output) &&\n      typeof output.Err === 'object' &&\n      Object.keys(output.Err || {}).length &&\n      typeof Object.values(output.Err || {})[0] === 'string'\n    ) {\n      const [errorKey, errorValue] = Object.entries(output.Err || {})[0]\n      errorText = `${errorKey}${errorValue}`\n    }\n\n    decodedOutput = errorText || 'Error'\n  }\n\n  return {\n    output,\n    decodedOutput,\n    isError,\n  }\n}\n","import { ApiPromise } from '@polkadot/api'\nimport { AccountId } from '@polkadot/types/interfaces'\nimport { BN } from '@polkadot/util'\nimport { BalanceFormatterOptions, formatBalance } from './formatBalance'\n\nexport type BalanceData = {\n  tokenDecimals: number\n  tokenSymbol: string\n  freeBalance?: BN\n  freeBalanceFormatted?: string\n  reservedBalance?: BN\n  reservedBalanceFormatted?: string\n  reducibleBalance?: BN\n  reducibleBalanceFormatted?: string\n  balance?: BN\n  balanceFormatted?: string\n}\n\n/**\n * Returns the native token balance of the given `address`.\n */\nexport const getBalance = async (\n  api: ApiPromise,\n  address: string | AccountId | undefined,\n  formatterOptions?: BalanceFormatterOptions,\n): Promise<BalanceData> => {\n  if (!address) {\n    const { tokenDecimals, tokenSymbol } = parseBalanceData(api)\n    return {\n      tokenDecimals,\n      tokenSymbol,\n    }\n  }\n\n  // Query the chain and parse data\n  const result: any = await api.query.system.account(address)\n  const balanceData = parseBalanceData(api, result?.data, formatterOptions)\n\n  return balanceData\n}\n\n/**\n * Watches the native token balance of the given `address` and returns it in a callback.\n * The returned void function can be used to unsubscribe.\n */\nexport const watchBalance = async (\n  api: ApiPromise,\n  address: string | AccountId | undefined,\n  callback: (data: BalanceData) => void,\n  formatterOptions?: BalanceFormatterOptions,\n): Promise<VoidFunction | null> => {\n  const { tokenDecimals, tokenSymbol } = parseBalanceData(api)\n  if (!address) {\n    callback({\n      tokenDecimals,\n      tokenSymbol,\n    })\n    return null\n  }\n\n  // Query the chain, parse data, and call the callback\n  const unsubscribe: any = await api.query.system.account(address, ({ data }: any) => {\n    const balanceData = parseBalanceData(api, data, formatterOptions)\n    callback(balanceData)\n  })\n  return unsubscribe\n}\n\n/**\n * Helper to parse the fetched balance data.\n */\nconst parseBalanceData = (\n  api: ApiPromise,\n  data?: any,\n  formatterOptions?: BalanceFormatterOptions,\n): BalanceData => {\n  // Get the token decimals and symbol\n  const tokenDecimals = api.registry.chainDecimals?.[0] || 12\n  const tokenSymbol = api.registry.chainTokens?.[0] || 'Unit'\n\n  // Get the balance\n  const freeBalance: BN = new BN(data?.free || 0)\n  const reservedBalance: BN = new BN(data?.reserved || 0)\n  const balance = reservedBalance.add(freeBalance)\n\n  // Calculate the reducible balance (see: https://substrate.stackexchange.com/a/3009/3470)\n  const miscFrozenBalance: BN = new BN(data?.miscFrozen || 0)\n  const feeFrozenBalance: BN = new BN(data?.feeFrozen || 0)\n  const reducibleBalance = freeBalance.sub(\n    miscFrozenBalance.gt(feeFrozenBalance) ? miscFrozenBalance : feeFrozenBalance,\n  )\n\n  // Format the balance\n  const freeBalanceFormatted = formatBalance(api, freeBalance, formatterOptions)\n  const reservedBalanceFormatted = formatBalance(api, reservedBalance, formatterOptions)\n  const reducibleBalanceFormatted = formatBalance(api, reducibleBalance, formatterOptions)\n  const balanceFormatted = formatBalance(api, balance, formatterOptions)\n\n  return {\n    tokenDecimals,\n    tokenSymbol,\n    freeBalance,\n    freeBalanceFormatted,\n    reservedBalance,\n    reservedBalanceFormatted,\n    reducibleBalance,\n    reducibleBalanceFormatted,\n    balance,\n    balanceFormatted,\n  }\n}\n","import { ApiPromise } from '@polkadot/api'\nimport { BN, formatBalance as polkadotFormatBalance } from '@polkadot/util'\n\nexport type PolkadotBalanceFormatterOptions = NonNullable<\n  Parameters<typeof polkadotFormatBalance>['1']\n>\n\nexport type BalanceFormatterOptions = Omit<\n  PolkadotBalanceFormatterOptions,\n  'forceUnit' | 'withZero'\n> & {\n  forceUnit?: string | undefined | false\n  fixedDecimals?: number\n  removeTrailingZeros?: boolean\n}\n\n/**\n * Improved & extended version of `formatBalance` from `@polkadot/util`.\n */\nexport const formatBalance = (\n  api: ApiPromise | undefined,\n  value?: BN,\n  options?: BalanceFormatterOptions,\n): string => {\n  if (!value) return ''\n\n  const tokenDecimals = api?.registry?.chainDecimals?.[0] || 12\n  const tokenSymbol = api?.registry?.chainTokens?.[0] || 'Unit'\n\n  const _options: BalanceFormatterOptions = Object.assign(\n    {\n      decimals: tokenDecimals,\n      withUnit: true,\n      forceUnit: '-',\n    } satisfies BalanceFormatterOptions,\n    options,\n  )\n\n  let formattedBalance = polkadotFormatBalance(value, {\n    ..._options,\n    withUnit: false,\n    withZero: false,\n  } as PolkadotBalanceFormatterOptions)\n\n  // Convert to fixed decimals\n  if (_options.fixedDecimals !== undefined) {\n    // Remove siUnit amd add it back later\n    let siUnit\n    if (_options.forceUnit !== '-') {\n      siUnit = formattedBalance.split(' ')[1]\n      formattedBalance = formattedBalance.split(' ')[0]\n    }\n\n    // Apply fixed decimals\n    formattedBalance = toFixed(\n      formattedBalance,\n      _options.fixedDecimals,\n      _options.removeTrailingZeros,\n    )\n\n    if (siUnit) formattedBalance = `${formattedBalance} ${siUnit}`\n  }\n\n  // Place hairline space between number and `siUnit`\n  if (_options.forceUnit !== '-') {\n    const siUnit = formattedBalance.split(' ')[1]\n    formattedBalance = formattedBalance.split(' ')[0]\n    if (siUnit) formattedBalance = `${formattedBalance}\\u200A${siUnit}`\n  }\n\n  // Add token symbol\n  if (_options.withUnit === true) {\n    formattedBalance = `${formattedBalance} ${tokenSymbol}`\n  }\n\n  return formattedBalance\n}\n\n/**\n * Helper function to convert a number (as string) to have fixed decimals.\n */\nconst toFixed = (value: string | number, decimals: number, removeTrailingZeros?: boolean) => {\n  const _value: string = typeof value === 'string' ? value : `${value}`\n\n  let valueDecimals = _value.split('.')[1] || '0'\n  valueDecimals = parseFloat(`0.${valueDecimals}`).toFixed(decimals)\n  if (removeTrailingZeros) {\n    valueDecimals = `${+valueDecimals}`\n  }\n\n  const formattedValue = valueDecimals.split('.')[1]\n    ? `${_value.split('.')[0]}.${valueDecimals.split('.')[1]}`\n    : _value.split('.')[0]\n\n  return formattedValue\n}\n","import { ApiPromise } from '@polkadot/api'\nimport type { WeightV2 } from '@polkadot/types/interfaces'\nimport { BN, bnToBn } from '@polkadot/util'\n\n/**\n * Helper function that returns Weights V2 `gasLimit` object.\n */\nexport const getGasLimit = (api: ApiPromise, _refTime: string | BN, _proofSize: string | BN) => {\n  const refTime = bnToBn(_refTime)\n  const proofSize = bnToBn(_proofSize)\n\n  return api.registry.createType('WeightV2', {\n    refTime,\n    proofSize,\n  }) as WeightV2\n}\n\n/**\n * Helper function that returns the maximum gas limit Weights V2 object\n * for an extrinsiv based on the api chain constants.\n * NOTE: It's reduced by a given factor (defaults to 80%) to avoid storage exhaust.\n */\nexport const getMaxGasLimit = (api: ApiPromise, reductionFactor = 0.8) => {\n  const blockWeights = api.consts.system.blockWeights.toPrimitive() as any\n  const maxExtrinsic = blockWeights?.perClass?.normal?.maxExtrinsic\n  const maxRefTime = maxExtrinsic?.refTime\n    ? bnToBn(maxExtrinsic.refTime)\n        .mul(new BN(reductionFactor * 100))\n        .div(new BN(100))\n    : new BN(0)\n  const maxProofSize = maxExtrinsic?.proofSize\n    ? bnToBn(maxExtrinsic.proofSize)\n        .mul(new BN(reductionFactor * 100))\n        .div(new BN(100))\n    : new BN(0)\n\n  return getGasLimit(api, maxRefTime, maxProofSize)\n}\n","import { ApiPromise } from '@polkadot/api'\nimport { CodePromise } from '@polkadot/api-contract'\nimport { ContractOptions } from '@polkadot/api-contract/types'\nimport { EventRecord, SignedBlock } from '@polkadot/types/interfaces'\nimport { IKeyringPair } from '@polkadot/types/types'\nimport { stringCamelCase } from '@polkadot/util'\nimport { getMaxGasLimit } from './getGasLimit'\n\n/**\n * Uploads & instantiates a contract on-chain.\n */\nexport const deployContract = async (\n  api: ApiPromise,\n  account: IKeyringPair | string,\n  abi: any,\n  wasm: Uint8Array | string | Buffer,\n  constructorMethod = 'new',\n  args = [] as unknown[],\n  options = {} as ContractOptions,\n) => {\n  return new Promise<{\n    address: string\n    hash: string\n    block: SignedBlock\n    blockNumber: number\n  }>(async (resolve, reject) => {\n    const code = new CodePromise(api, abi, wasm)\n    const gasLimit = getMaxGasLimit(api)\n    const constructorFn = code.tx[stringCamelCase(constructorMethod)]\n    const unsub = await constructorFn({ gasLimit, ...options }, ...args).signAndSend(\n      account,\n      async ({ events, contract, status }: any) => {\n        if (status?.isInBlock) {\n          unsub?.()\n\n          const extrinsicFailedEvent = events.find(\n            ({ event: { method } }: any) => method === 'ExtrinsicFailed',\n          ) as EventRecord\n          if (!!extrinsicFailedEvent || !contract?.address) {\n            console.error(\n              `Contract '${abi?.contract.name}' could not be deployed`,\n              extrinsicFailedEvent?.event?.data?.toHuman(),\n            )\n            return reject()\n          }\n\n          const hash = abi?.source.hash\n          const address = contract.address.toString()\n\n          // Determine block number\n          const blockHash = status.asInBlock.toHex()\n          const block = await api.rpc.chain.getBlock(blockHash)\n          const blockNumber = block.block.header.number.toNumber()\n\n          console.log(\n            `Contract '${abi?.contract.name}' deployed under ${address} at block #${blockNumber}`,\n          )\n\n          return resolve({\n            address,\n            hash,\n            block,\n            blockNumber,\n          })\n        }\n      },\n    )\n  })\n}\n","import { SubstrateChain } from '@chains'\nimport { ApiPromise, HttpProvider, WsProvider } from '@polkadot/api'\nimport { ApiOptions } from '@polkadot/api/types'\n\n/**\n * Helper to initialize polkadot.js API with given chain and options.\n */\nexport const initPolkadotJs = async (\n  chain: SubstrateChain,\n  options?: ApiOptions,\n): Promise<{ api: ApiPromise; provider: WsProvider | HttpProvider }> => {\n  const rpcUrl = chain.rpcUrls[0]\n  if (!rpcUrl) {\n    throw new Error('Given chain has no RPC url defined')\n  }\n\n  const provider = rpcUrl.startsWith('http') ? new HttpProvider(rpcUrl) : new WsProvider(rpcUrl)\n  const api = await ApiPromise.create({\n    provider,\n    ...options,\n  })\n\n  return { api, provider }\n}\n","import { ApiPromise } from '@polkadot/api'\nimport { AccountId } from '@polkadot/types/interfaces'\nimport { Callback, IKeyringPair, ISubmittableResult } from '@polkadot/types/types'\nimport { BN } from '@polkadot/util'\n\n/**\n * Transfers a given amount of tokens from one account to another.\n */\nexport const transferBalance = async (\n  api: ApiPromise,\n  fromAccount: IKeyringPair | string,\n  toAddress: string | AccountId,\n  amount: BN,\n  statusCb?: Callback<ISubmittableResult>,\n) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const unsub = await api.tx.balances\n        .transfer(toAddress, amount)\n        .signAndSend(fromAccount, (result) => {\n          statusCb?.(result)\n          const isInBlock = result?.status?.isInBlock\n          if (!isInBlock) return\n          const errorEvent = result?.events.find(\n            ({ event: { method } }: any) => method === 'ExtrinsicFailed',\n          )\n          if (isInBlock && errorEvent) {\n            // Reject if `ExtrinsicFailed` event was found\n            reject({\n              errorMessage: 'ExtrinsicFailed',\n              errorEvent,\n            })\n            unsub?.()\n          } else if (isInBlock) {\n            // Otherwise resolve succesfully if transaction is in block\n            resolve({ result })\n            unsub?.()\n          }\n        })\n    } catch (e) {\n      // Reject if user cancelled with `UserCancelled`\n      reject({ errorMessage: 'UserCancelled' })\n    }\n  })\n}\n\n/**\n * Transfers all available tokens from one account to another.\n */\nexport const transferFullBalance = async (\n  api: ApiPromise,\n  fromAccount: IKeyringPair | string,\n  toAddress: string | AccountId,\n  keepAlive?: boolean,\n  statusCb?: Callback<ISubmittableResult>,\n) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const unsub = await api.tx.balances\n        .transferAll(toAddress, !!keepAlive)\n        .signAndSend(fromAccount, (result) => {\n          statusCb?.(result)\n          const isInBlock = result?.status?.isInBlock\n          if (!isInBlock) return\n          const errorEvent = result?.events.find(\n            ({ event: { method } }: any) => method === 'ExtrinsicFailed',\n          )\n          if (isInBlock && errorEvent) {\n            // Reject if `ExtrinsicFailed` event was found\n            reject({\n              errorMessage: 'ExtrinsicFailed',\n              errorEvent,\n            })\n            unsub?.()\n          } else if (isInBlock) {\n            // Otherwise resolve succesfully if transaction is in block\n            resolve({ result })\n            unsub?.()\n          }\n        })\n    } catch (e) {\n      console.error(e)\n      // Reject if user cancelled with `UserCancelled`\n      reject({ errorMessage: 'UserCancelled' })\n    }\n  })\n}\n","import { ContractCallOutcome } from '@polkadot/api-contract/types'\n\n/**\n * Unwraps a Weights V2 result type or errors if there is no 'ok' value.\n */\nexport const unwrapResultOrError = <T = any>(\n  outcome: Pick<ContractCallOutcome, 'result' | 'output'>,\n): T => {\n  const { result, output } = outcome\n  if (!result?.isOk || !output) {\n    throw new Error(`Error while unwrapping: ${result.toString()}`)\n  }\n  return (output.toPrimitive() as { ok: T }).ok\n}\n\n/**\n * Unwraps a Weights V2 result type or returns the given default if there is no 'ok' value.\n */\nexport const unwrapResultOrDefault = <T = any>(\n  outcome: Pick<ContractCallOutcome, 'result' | 'output'>,\n  defaultValue: T,\n): T => {\n  const { result, output } = outcome\n  let unwrappedResult: T = defaultValue\n  if (result?.isOk && !!output) {\n    unwrappedResult = (output.toPrimitive() as { ok: T }).ok\n  }\n  return unwrappedResult\n}\n","import { ApiPromise } from '@polkadot/api'\nimport { Abi, ContractPromise } from '@polkadot/api-contract'\nimport { AccountId } from '@polkadot/types/interfaces'\nimport { Dispatch, SetStateAction } from 'react'\n\n/**\n * Substrate Deployment\n */\nexport interface SubstrateDeployment {\n  contractId: string\n  networkId: string\n  abi: string | Record<string, unknown> | Abi\n  address: string | AccountId\n}\n\n/**\n * Registering the given `deployment` with the given `setDeployments` dispatcher.\n * The registry is kept unique, so if there is already one deployment with\n * equal `contractId` and `networkId` it will be replaced.\n */\nexport const registerDeployment = (\n  setDeployments: Dispatch<SetStateAction<SubstrateDeployment[]>>,\n  deployment: SubstrateDeployment,\n) => {\n  setDeployments((deployments) => {\n    // Check if deployment already exists & remove\n    const idx = deployments.findIndex(\n      ({ contractId, networkId }) =>\n        contractId.toLowerCase() === deployment.contractId.toLowerCase() &&\n        networkId.toLowerCase() === deployment.networkId.toLowerCase(),\n    )\n    if (idx >= 0) deployments.splice(idx, 1)\n\n    // Add new deployment\n    return [...deployments, deployment]\n  })\n}\n\n/**\n * Registers all given `deployments` via `registerDeployment` after awaiting the promise.\n */\nexport const registerDeployments = async (\n  setDeployments: Dispatch<SetStateAction<SubstrateDeployment[]>>,\n  deployments: Promise<SubstrateDeployment[]>,\n) => {\n  ;(await deployments).forEach((deployment) => registerDeployment(setDeployments, deployment))\n}\n\n/**\n * Returns the first matching deployment from the given `deployments` array\n * with an equal `contractId` and `networkId`\n */\nexport const getDeployment = (\n  deployments: SubstrateDeployment[],\n  contractId: string,\n  networkId: string,\n) => {\n  return deployments.find((deployment) => {\n    return (\n      deployment.contractId.toLowerCase() === contractId.toLowerCase() &&\n      deployment.networkId.toLowerCase() === (networkId || '').toLowerCase()\n    )\n  })\n}\n\n/**\n * Takes the first matching deployment from the given `deployments` array\n * with an equal `contractId` and `networkId` and creates a `ContractPromise`.\n */\nexport const getDeploymentContract = (\n  api: ApiPromise,\n  deployments: SubstrateDeployment[],\n  contractId: string,\n  networkId: string,\n) => {\n  if (!api) return undefined\n  const deployment = getDeployment(deployments || [], contractId, networkId)\n  if (!deployment) return undefined\n  return new ContractPromise(api, deployment?.abi, deployment?.address)\n}\n","import { Injected, InjectedExtension, InjectedWindow } from '@polkadot/extension-inject/types'\n\n/**\n * Substrate Wallet Type(s)\n */\nexport interface SubstrateWallet {\n  id: string\n  name: string\n  platforms: [SubstrateWalletPlatform, ...SubstrateWalletPlatform[]]\n  urls: {\n    website: string\n    chromeExtension?: string\n    firefoxExtension?: string\n    iosApp?: string\n    androidApp?: string\n  }\n  logoUrls: [string, ...string[]]\n}\nexport enum SubstrateWalletPlatform {\n  Browser = 'browser',\n  Android = 'android',\n  iOS = 'ios',\n}\n\n/**\n * Defined Substrate Wallet Constants\n */\nexport const polkadotjs: SubstrateWallet = {\n  id: 'polkadot-js',\n  name: 'Polkadot{.js}',\n  platforms: [SubstrateWalletPlatform.Browser],\n  urls: {\n    website: 'https://polkadot.js.org/extension/',\n    chromeExtension:\n      'https://chrome.google.com/webstore/detail/polkadot%7Bjs%7D-extension/mopnmbcafieddcagagdcbnhejhlodfdd',\n    firefoxExtension: 'https://addons.mozilla.org/en-US/firefox/addon/polkadot-js-extension/',\n  },\n  logoUrls: [\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/polkadot@128w.png',\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/polkadot@512w.png',\n  ],\n}\n\nexport const subwallet: SubstrateWallet = {\n  id: 'subwallet-js',\n  name: 'SubWallet',\n  platforms: [SubstrateWalletPlatform.Browser],\n  urls: {\n    website: 'https://subwallet.app/',\n    chromeExtension:\n      'https://chrome.google.com/webstore/detail/subwallet-polkadot-extens/onhogfjeacnfoofkfgppdlbmlmnplgbn',\n    firefoxExtension: 'https://addons.mozilla.org/en-US/firefox/addon/subwallet/',\n  },\n  logoUrls: [\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/subwallet@128w.png',\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/subwallet@512w.png',\n  ],\n}\n\nexport const talisman: SubstrateWallet = {\n  id: 'talisman',\n  name: 'Talisman',\n  platforms: [SubstrateWalletPlatform.Browser],\n  urls: {\n    website: 'https://www.talisman.xyz/',\n    chromeExtension:\n      'https://chrome.google.com/webstore/detail/talisman-polkadot-wallet/fijngjgcjhjmmpcmkeiomlglpeiijkld',\n    firefoxExtension: 'https://addons.mozilla.org/en-US/firefox/addon/talisman-wallet-extension/',\n  },\n  logoUrls: [\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/talisman@128w.png',\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/talisman@512w.png',\n  ],\n}\n\nexport const nova: SubstrateWallet = {\n  id: 'nova',\n  name: 'Nova Wallet',\n  platforms: [SubstrateWalletPlatform.Android, SubstrateWalletPlatform.iOS],\n  urls: {\n    website: 'https://novawallet.io/',\n    androidApp: 'https://play.google.com/store/apps/details?id=io.novafoundation.nova.market',\n    iosApp: 'https://apps.apple.com/app/nova-polkadot-kusama-wallet/id1597119355',\n  },\n  logoUrls: [\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/nova@128w.png',\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/nova@512w.png',\n  ],\n}\n\nexport const alephzeroSigner: SubstrateWallet = {\n  id: 'aleph-zero-signer',\n  name: 'Aleph Zero Signer',\n  platforms: [SubstrateWalletPlatform.Browser],\n  urls: {\n    website: 'https://alephzero.org/signer',\n    chromeExtension: 'https://chrome.google.com/webstore/detail/opbinaebpmphpefcimknblieddamhmol',\n    firefoxExtension: 'https://addons.mozilla.org/en-US/firefox/addon/aleph-zero-signer/',\n  },\n  logoUrls: [\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/aleph-zero-signer@128w.png',\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/aleph-zero-signer@512w.png',\n  ],\n}\n\nexport const nightly: SubstrateWallet = {\n  id: 'Nightly',\n  name: 'Nightly Wallet',\n  platforms: [SubstrateWalletPlatform.Browser],\n  urls: {\n    website: 'https://wallet.nightly.app',\n    chromeExtension:\n      'https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa',\n    firefoxExtension: 'https://addons.mozilla.org/en-GB/firefox/addon/nightly-app/',\n  },\n  logoUrls: [\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/nightly@128w.png',\n    'https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/nightly@512w.png',\n  ],\n}\n\n/**\n * Exporting all wallets separately\n */\nexport const allSubstrateWallets: SubstrateWallet[] = [\n  subwallet,\n  talisman,\n  polkadotjs,\n  nova,\n  alephzeroSigner,\n  nightly,\n]\n\n/**\n * Returns wallet (if existent) for given identifier (`id` field).\n */\nexport const getSubstrateWallet = (id: string): SubstrateWallet | undefined => {\n  return allSubstrateWallets.find((wallet) => wallet.id === id)\n}\n\n/*\n * Returns `true` if wallet is installed, `false` if not, and\n * `undefined` if the environment is not a client browser.\n */\nexport const isWalletInstalled = (wallet: SubstrateWallet) => {\n  try {\n    if (typeof window === 'undefined') return undefined\n    const injectedWindow = window as Window & InjectedWindow\n    const injectedExtension = injectedWindow?.injectedWeb3?.[wallet.id]\n\n    // Special case for Nova Wallet\n    const novaIsInstalled = !!(injectedWindow as any).walletExtension?.isNovaWallet\n    if (novaIsInstalled && wallet.id === polkadotjs.id) return false\n    if (novaIsInstalled && wallet.id === nova.id) return true\n\n    return !!injectedExtension\n  } catch (e) {\n    return undefined\n  }\n}\n\n/**\n * Enables the given wallet (if existent) and returns the injected extension.\n */\nexport const enableWallet = async (wallet: SubstrateWallet, appName: string) => {\n  if (!isWalletInstalled(wallet)) return undefined\n\n  try {\n    if (typeof window === 'undefined') return undefined\n    const injectedWindow = window as Window & InjectedWindow\n    const injectedWindowProvider =\n      injectedWindow?.injectedWeb3?.[wallet.id === nova.id ? polkadotjs.id : wallet.id]\n    const injected: Injected = await injectedWindowProvider?.enable(appName)\n    const injectedExtension: InjectedExtension = {\n      ...injected,\n      name: wallet.id,\n      version: injectedWindowProvider.version,\n    }\n    return injectedExtension\n  } catch (e) {\n    return undefined\n  }\n}\n","import { accountArraysAreEqual, accountsAreEqual } from '@helpers'\nimport { initPolkadotJs } from '@helpers/initPolkadotJs'\nimport { ApiPromise, HttpProvider, WsProvider } from '@polkadot/api'\nimport { ApiOptions } from '@polkadot/api/types'\nimport { InjectedAccount, InjectedExtension, Unsubcall } from '@polkadot/extension-inject/types'\nimport { Signer } from '@polkadot/types/types'\nimport { SubstrateDeployment, registerDeployments } from '@registry'\nimport {\n  SubstrateWallet,\n  allSubstrateWallets,\n  enableWallet,\n  getSubstrateWallet,\n  isWalletInstalled,\n  nightly,\n} from '@wallets'\nimport {\n  Dispatch,\n  FC,\n  PropsWithChildren,\n  SetStateAction,\n  createContext,\n  useContext,\n  useEffect,\n  useState,\n} from 'react'\nimport { SubstrateChain, getSubstrateChain } from './chains'\n\n/**\n * Helper Types\n */\nexport enum UseInkathonErrorCode {\n  InitializationError,\n  NoSubstrateExtensionDetected,\n  NoAccountInjected,\n}\nexport interface UseInkathonError {\n  code: UseInkathonErrorCode\n  message: string\n}\n\n/**\n * UseInkathon Context Type\n */\nexport type UseInkathonProviderContextType = {\n  isInitializing?: boolean\n  isInitialized?: boolean\n  isConnecting?: boolean\n  isConnected?: boolean\n  error?: UseInkathonError\n  activeChain?: SubstrateChain\n  switchActiveChain?: (chain: SubstrateChain) => Promise<void>\n  api?: ApiPromise\n  provider?: WsProvider | HttpProvider\n  connect?: (\n    chain?: SubstrateChain,\n    wallet?: SubstrateWallet,\n    lastActiveAccountAddress?: string,\n  ) => Promise<void>\n  disconnect?: () => void\n  accounts?: InjectedAccount[]\n  activeAccount?: InjectedAccount\n  activeExtension?: InjectedExtension\n  activeSigner?: Signer\n  setActiveAccount?: Dispatch<SetStateAction<InjectedAccount | undefined>>\n  lastActiveAccount?: InjectedAccount\n  deployments?: SubstrateDeployment[]\n}\nexport const UseInkathonProviderContext = createContext<UseInkathonProviderContextType | null>(null)\n\n/**\n * Primary useInkathon hook that exposes `UseInkathonProviderContext`.\n */\nexport const useInkathon = () => {\n  const context = useContext(UseInkathonProviderContext)\n\n  if (!context) throw new Error('useInkathon must be used within a UseInkathonProvider')\n\n  return context\n}\n\n/**\n * Primary useInkathon provider that needs to be wrapped around the app\n * (see documentation) to use `useInkathon` and other hooks anywhere.\n */\nexport interface UseInkathonProviderProps extends PropsWithChildren {\n  appName: string\n  defaultChain: SubstrateChain | SubstrateChain['network']\n  connectOnInit?: boolean\n  deployments?: Promise<SubstrateDeployment[]>\n  apiOptions?: ApiOptions\n}\nexport const UseInkathonProvider: FC<UseInkathonProviderProps> = ({\n  children,\n  appName,\n  defaultChain,\n  connectOnInit,\n  deployments: _deployments,\n  apiOptions,\n}) => {\n  // Check if default chain was provided\n  if (\n    !defaultChain ||\n    (typeof defaultChain === 'string' && getSubstrateChain(defaultChain) === undefined)\n  ) {\n    throw new Error(\n      'None or invalid `defaultChain` provided with `UseInkathonProvider`. Forgot to set environment variable?',\n    )\n  }\n\n  // Setup state variables\n  const [isInitializing, setIsInitializing] = useState(true)\n  const [isInitialized, setIsInitialized] = useState(false)\n  const [isConnecting, setIsConnecting] = useState(connectOnInit)\n  const [isConnected, setIsConnected] = useState(false)\n  const [error, setError] = useState<UseInkathonError | undefined>()\n  const [activeChain, setActiveChain] = useState<SubstrateChain>(\n    (typeof defaultChain === 'string'\n      ? getSubstrateChain(defaultChain)\n      : defaultChain) as SubstrateChain,\n  )\n  const [api, setApi] = useState<ApiPromise>()\n  const [provider, setProvider] = useState<WsProvider | HttpProvider>()\n  const [accounts, setAccounts] = useState<InjectedAccount[]>([])\n  const [activeAccount, setActiveAccount] = useState<InjectedAccount>()\n  const [activeExtension, setActiveExtension] = useState<InjectedExtension>()\n  const [lastActiveAccount, setLastActiveAccount] = useState<InjectedAccount>()\n  const [activeSigner, setActiveSigner] = useState<Signer>()\n  const [unsubscribeAccounts, setUnsubscribeAccounts] = useState<Unsubcall>()\n  const [deployments, setDeployments] = useState<SubstrateDeployment[]>([])\n\n  // Register given deployments\n  useEffect(() => {\n    if (_deployments) registerDeployments(setDeployments, _deployments)\n  }, [])\n\n  // Initialize polkadot-js/api\n  const initialize = async (chain?: SubstrateChain) => {\n    setIsInitialized(!!api?.isConnected)\n    setIsInitializing(true)\n    setIsConnected(false)\n    setError(undefined)\n\n    try {\n      const _chain = chain || activeChain\n      const { api, provider } = await initPolkadotJs(_chain, {\n        noInitWarn: true,\n        throwOnConnect: true,\n        ...apiOptions,\n      })\n      setProvider(provider)\n      setApi(api)\n      setIsInitialized(true)\n\n      // Update active chain if switching\n      if (activeChain.network !== _chain.network) setActiveChain(_chain)\n    } catch (e) {\n      const message = 'Error while initializing polkadot.js api'\n      console.error(message, e)\n      setError({ code: UseInkathonErrorCode.InitializationError, message })\n      setIsConnected(false)\n      setIsConnecting(false)\n      setIsInitialized(false)\n      setApi(undefined)\n      setProvider(undefined)\n    } finally {\n      setIsInitializing(false)\n    }\n  }\n\n  // Updates account list and active account\n  const updateAccounts = (\n    injectedAccounts: InjectedAccount[],\n    lastActiveAccountAddress?: string,\n  ) => {\n    const newAccounts = injectedAccounts || []\n    // Find active account in new accounts or fallback to latest account\n    const _lastAccount = lastActiveAccountAddress\n      ? { address: lastActiveAccountAddress }\n      : lastActiveAccount\n    const newAccount =\n      newAccounts.find((a) => accountsAreEqual(a, _lastAccount)) || newAccounts?.[0]\n\n    // Update accounts and active account\n    if (!accountArraysAreEqual(accounts, newAccounts)) {\n      setAccounts(() => newAccounts)\n    }\n    if (!accountsAreEqual(activeAccount, newAccount)) {\n      setActiveAccount(() => newAccount)\n    }\n    setIsConnected(!!newAccount)\n  }\n  useEffect(() => {\n    if (activeAccount && !accountsAreEqual(activeAccount, lastActiveAccount)) {\n      setLastActiveAccount(() => activeAccount)\n    }\n  }, [activeAccount])\n\n  // Connect to injected wallet\n  const connect = async (\n    chain?: SubstrateChain,\n    wallet?: SubstrateWallet,\n    lastActiveAccountAddress?: string,\n  ) => {\n    setError(undefined)\n    setIsConnecting(true)\n    setIsConnected(!!activeAccount)\n\n    // Make sure api is initialized & connected to provider\n    if (!api?.isConnected || (chain && chain.network !== activeChain.network)) {\n      await initialize(chain)\n    }\n\n    try {\n      // Determine installed wallets\n      const wallets = allSubstrateWallets.filter((w) => isWalletInstalled(w))\n      if (!wallets?.length) {\n        const message = 'No Substrate-compatible extension detected'\n        setError({\n          code: UseInkathonErrorCode.NoSubstrateExtensionDetected,\n          message,\n        })\n        throw new Error(message)\n      }\n\n      // Determine wallet to use\n      const preferredWallet = wallet && wallets.find((w) => w.id === wallet.id)\n      const _wallet = preferredWallet || wallets[0]\n\n      // Enable wallet\n      const extension = await enableWallet(_wallet, appName)\n      const signer = extension?.signer as Signer\n      setActiveExtension(extension)\n      setActiveSigner(signer)\n\n      // NOTE: Special handling for Nightly Wallet\n      if (extension?.name === nightly.id) {\n        const accounts = (extension?.accounts as any)?.activeAccounts\n        if (accounts?.length) updateAccounts(accounts, lastActiveAccountAddress)\n        else throw new Error('No injected account found')\n      }\n\n      // Query & keep listening to injected accounts\n      unsubscribeAccounts?.()\n      const unsubscribe = extension?.accounts.subscribe((accounts) => {\n        updateAccounts(accounts, lastActiveAccountAddress)\n      })\n      setUnsubscribeAccounts(unsubscribe)\n    } catch (e: any) {\n      console.error('Error while connecting wallet:', e)\n      setActiveExtension(undefined)\n      setActiveSigner(undefined)\n      setIsConnected(false)\n    } finally {\n      setIsConnecting(false)\n    }\n  }\n\n  // Keep active signer up to date\n  useEffect(() => {\n    api?.setSigner(activeSigner as Signer)\n  }, [api, activeSigner])\n\n  // Disconnect\n  const disconnect = async (disconnectApi?: boolean) => {\n    if (disconnectApi) {\n      await api?.disconnect()\n      return\n    }\n    setIsConnected(false)\n    updateAccounts([])\n    unsubscribeAccounts?.()\n    setUnsubscribeAccounts(undefined)\n    setActiveExtension(undefined)\n  }\n\n  // API Disconnection listener\n  useEffect(() => {\n    const handler = () => {\n      disconnect()\n      setIsInitialized(false)\n    }\n    api?.on('disconnected', handler)\n    return () => {\n      api?.off('disconnected', handler)\n    }\n  }, [api])\n\n  // Initialze\n  useEffect(() => {\n    connectOnInit ? connect() : initialize()\n    return () => {\n      unsubscribeAccounts?.()\n    }\n  }, [])\n\n  // Switch active chain\n  const switchActiveChain = async (chain: SubstrateChain) => {\n    const activeWallet = activeExtension && getSubstrateWallet(activeExtension.name)\n    await connect(chain, activeWallet)\n  }\n\n  return (\n    <UseInkathonProviderContext.Provider\n      value={{\n        isInitializing,\n        isInitialized,\n        isConnecting,\n        isConnected,\n        error,\n        activeChain,\n        switchActiveChain,\n        api,\n        provider,\n        connect,\n        disconnect,\n        accounts,\n        activeAccount,\n        activeExtension,\n        activeSigner,\n        setActiveAccount,\n        lastActiveAccount,\n        deployments,\n      }}\n    >\n      {children}\n    </UseInkathonProviderContext.Provider>\n  )\n}\n","import { BalanceFormatterOptions } from '@helpers'\nimport { BalanceData, getBalance, watchBalance } from '@helpers/getBalance'\nimport { AccountId } from '@polkadot/types/interfaces'\nimport { useInkathon } from '@provider'\nimport { useEffect, useState } from 'react'\n\n/**\n * Hook that returns the native token balance of the given `address`.\n */\nexport const useBalance = (\n  address?: string | AccountId,\n  watch?: boolean,\n  formatterOptions?: BalanceFormatterOptions,\n): BalanceData => {\n  const { api } = useInkathon()\n  const [balanceData, setBalanceData] = useState<BalanceData>({\n    tokenSymbol: 'Unit',\n    tokenDecimals: 12,\n  } satisfies BalanceData)\n  const [unsubscribes, setUnsubscribes] = useState<(VoidFunction | null)[]>([])\n\n  useEffect(() => {\n    const updateBalanceData = (data: BalanceData) => {\n      setBalanceData(() => data)\n    }\n\n    if (!api) {\n      updateBalanceData({} as BalanceData)\n      return\n    }\n\n    if (watch) {\n      watchBalance(api, address, updateBalanceData, formatterOptions).then((unsubscribe) => {\n        setUnsubscribes((prev) => [...prev, unsubscribe])\n      })\n    } else {\n      getBalance(api, address, formatterOptions).then(updateBalanceData)\n    }\n\n    return () => {\n      unsubscribes.forEach((unsubscribe) => unsubscribe?.())\n      setUnsubscribes(() => [])\n    }\n  }, [api, address])\n\n  return balanceData\n}\n","import { Abi, ContractPromise } from '@polkadot/api-contract'\nimport { AccountId } from '@polkadot/types/interfaces'\nimport { useInkathon } from '@provider'\nimport { useEffect, useState } from 'react'\n\n/**\n * React Hook that returns a `ContractPromise` object configured with\n * the active api & chain as well as the given `abi` and `address`.\n */\nexport const useContract = (\n  abi?: string | Record<string, unknown> | Abi,\n  address?: string | AccountId,\n) => {\n  const { api, isConnecting } = useInkathon()\n  const [contract, setContract] = useState<ContractPromise | undefined>()\n\n  const initialize = async () => {\n    if (isConnecting || !api || !abi || !address) {\n      setContract(undefined)\n      return\n    }\n    const contract = new ContractPromise(api, abi, address)\n    setContract(contract)\n  }\n  useEffect(() => {\n    initialize()\n  }, [api, isConnecting, abi, address])\n\n  return {\n    contract,\n    address,\n  }\n}\n","import { useInkathon } from '@provider'\nimport { getDeployment } from '@registry'\nimport { useContract } from './useContract'\n\n/**\n * React Hook that returns a `ContractPromise` object configured with\n * the active api & chain as well as the given deployment contract id\n * which is looked up from the deployments registry.\n */\nexport const useRegisteredContract = (contractId: string, networkId?: string) => {\n  const { deployments, activeChain } = useInkathon()\n  networkId = networkId || activeChain?.network || ''\n  const deployment = getDeployment(deployments || [], contractId, networkId)\n  return useContract(deployment?.abi, deployment?.address)\n}\n"]}